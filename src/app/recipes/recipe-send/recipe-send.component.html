<mat-horizontal-stepper labelPosition="bottom" [linear]="false" #stepper>
    <mat-step [stepControl]="FormGroup1">
        <div class="title">Alap adatok</div>
        <form [formGroup]="FormGroup1">
            <ng-template matStepLabel></ng-template>
            <div>
                <mat-form-field hideRequiredMarker fxFlex="100%" [hideRequiredMarker]="true">
                    <input matInput #name maxlength="20" placeholder="Recept neve" formControlName="name" required>
                    <mat-hint align="end">{{name.value?.length || 0}}/20</mat-hint>
                </mat-form-field>
            </div>
            <div>
                <mat-form-field hideRequiredMarker fxFlex="100%">
                    <input matInput #short maxlength="50" placeholder="Rövid leírás" formControlName="short">
                    <mat-hint align="end">{{short.value?.length || 0}}/50</mat-hint>
                </mat-form-field>
            </div>
            <div>
                <mat-form-field hideRequiredMarker fxFlex="100%">
                    <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1" placeholder="Hosszabb leírás" formControlName="long"></textarea>
                </mat-form-field>
            </div>
            <div>
                <mat-form-field hideRequiredMarker fxFlex="100%">
                    <input matInput placeholder="Kép helye (URL)" formControlName="picture">
                    <input class="ng-hide" id="input-file-id" type="file" (change)="uploadFile($event)" />
                    <label matSuffix for="input-file-id">
                            <i class="fa fa-upload upload-icon"></i>
                    </label>
                </mat-form-field>
            </div>
            <mat-progress-bar mode="determinate" color="accent" value="{{uploadPercent | async}}" *ngIf="uploadPercent"></mat-progress-bar>

            <div fxLayout="row" fxLayoutAlign="start" class="pager">
                <div fxFlex="100%" fxLayoutAlign="end">
                    <button mat-flat-button color="#424242" matStepperNext class="right"><span fxLayoutAlign="end"><span class="button-label">Következő</span><i class="material-icons click-area click-area-right">keyboard_arrow_right</i></span></button>
                </div>
            </div>

        </form>
    </mat-step>
    <mat-step [stepControl]="FormGroup2">
        <div class="title">Kiegészítő adatok</div>
        <form [formGroup]="FormGroup2">
            <ng-template matStepLabel></ng-template>
            <div fxLayout fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="10px">
                <mat-form-field hideRequiredMarker fxFlex="30%">
                    <input matInput type="number" placeholder="Teríték" formControlName="serves">
                </mat-form-field>
                <mat-form-field hideRequiredMarker fxFlex="40%" [hideRequiredMarker]="true">
                    <mat-select formControlName="servesfor" matNativeControl required>
                        <mat-option value="személyre">személyre</mat-option>
                        <mat-option value="darabhoz">darabhoz</mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field hideRequiredMarker fxFlex="30%">
                    <input matInput type="number" placeholder="Elkészítési idő" formControlName="time">
                    <span matSuffix>perc</span>
                </mat-form-field>
            </div>
        </form>
        <div fxLayout="row" fxLayoutAlign="start" class="pager">
            <div fxFlex="50%" fxLayoutAlign="start">
                <button mat-flat-button color="#424242" matStepperPrevious class="left"><span fxLayoutAlign="start"><i class="material-icons click-area click-area-left">keyboard_arrow_left</i><span class="button-label">Előző</span></span></button>
            </div>
            <div fxFlex="50%" fxLayoutAlign="end">
                <button mat-flat-button color="#424242" matStepperNext class="right"><span fxLayoutAlign="end"><span class="button-label">Következő</span><i class="material-icons click-area click-area-right">keyboard_arrow_right</i></span></button>
            </div>
        </div>
    </mat-step>
    <mat-step [stepControl]="FormGroup3">
        <div class="title">Elkészítési útmutató</div>
        <form [formGroup]="FormGroup3">
            <ng-template matStepLabel></ng-template>
            <div formArrayName="steps">
                <div *ngFor="let step of stepForm.controls; let i=index; last as isLast; first as isFirst" [formGroupName]="i" fxLayout="row" fxLayoutAlign="start" fxLayoutGap="10px">
                    <mat-form-field hideRequiredMarker fxFlex="100%">
                        <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1" placeholder="{{i+1}}. lépés" formControlName="step" required></textarea>
                        <button matSuffix mat-button (click)="deleteStep(i)" *ngIf="isFirst == false"><mat-icon>delete</mat-icon></button>
                    </mat-form-field>
                    <div fxFlex="40px" class="addbutton">
                        <button mat-mini-fab color="basic" (click)="addStep()" *ngIf="isLast"><mat-icon>add</mat-icon></button>
                    </div>
                </div>
            </div>
            <div fxLayout="row" fxLayoutAlign="start" class="pager">
                <div fxFlex="50%" fxLayoutAlign="start">
                    <button mat-flat-button color="#424242" matStepperPrevious class="left"><span fxLayoutAlign="start"><i class="material-icons click-area click-area-left">keyboard_arrow_left</i><span class="button-label">Előző</span></span></button>
                </div>
                <div fxFlex="50%" fxLayoutAlign="end">
                    <button mat-flat-button color="#424242" matStepperNext class="right"><span fxLayoutAlign="end"><span class="button-label">Következő</span><i class="material-icons click-area click-area-right">keyboard_arrow_right</i></span></button>
                </div>
            </div>
        </form>
    </mat-step>
    <mat-step [stepControl]="FormGroup4">
        <div class="title">Hozzávalók listája</div>
        <form [formGroup]="FormGroup4">
            <ng-template matStepLabel></ng-template>
            <div formArrayName="ingredients">
                <div *ngFor="let ingred of ingredientForm.controls; let ii=index; last as isLast; first as isFirst" [formGroupName]="ii">
                    <div fxLayout fxLayout.xs="row" fxLayoutAlign="start" fxFlex="100%" fxLayoutGap="10px">
                        <div fxLayoutGap="10px" fxLayout fxLayout.xs="column" fxFlex="100%">
                            <mat-form-field hideRequiredMarker fxFlex="100%">
                                <input matInput placeholder="Mennyiség" formControlName="quanity" required>
                            </mat-form-field>
                            <mat-form-field hideRequiredMarker fxFlex="100%">
                                <input matInput placeholder="Hozzávaló" formControlName="ingredient" required>
                                <button matSuffix mat-button (click)="deleteIngredient(ii)" *ngIf="isFirst == false"><mat-icon>delete</mat-icon></button>
                            </mat-form-field>
                        </div>
                        <div fxFlex="40px" class="addbutton">
                            <button mat-mini-fab color="basic" (click)="addIngredient()" *ngIf="isLast"><mat-icon>add</mat-icon></button>
                        </div>
                    </div>
                </div>
            </div>
            <div fxLayout="row" fxLayoutAlign="start" class="pager">
                <div fxFlex="50%" fxLayoutAlign="start">
                    <button mat-flat-button color="#424242" matStepperPrevious class="left"><span fxLayoutAlign="start"><i class="material-icons click-area click-area-left">keyboard_arrow_left</i><span class="button-label">Előző</span></span></button>
                </div>
                <div fxFlex="50%" fxLayoutAlign="end">
                    <button mat-flat-button color="#424242" matStepperNext class="right"><span fxLayoutAlign="end"><span class="button-label">Következő</span><i class="material-icons click-area click-area-right">keyboard_arrow_right</i></span></button>
                </div>
            </div>
        </form>
    </mat-step>
    <mat-step [stepControl]="FormGroup5">
        <div class="title">Véglegesítés</div>
        <form [formGroup]="FormGroup5">
            <ng-template matStepLabel></ng-template>
            <mat-checkbox formControlName="share">Közzéteszem a receptet</mat-checkbox>
            <div class="page5">
                A fenti opcióval közzéteheted a receptedet. Amennyiben ezt megteszed, az mindenki számára láthatóvá válik. A késóbbiekben ezt az opciót nem tudod módosítani.
            </div>
            <div fxLayout="row" fxLayoutAlign="end" fxLayoutGap="10px">
                <div fxFlex="100px" fxLayoutAlign="end">
                    <button mat-flat-button color="basic" (click)="stepper.reset()">Mégsem</button>
                </div>
                <div fxFlex="100px" fxLayoutAlign="end">
                    <button mat-flat-button color="primary" (click)="writeRecipeForm();stepper.reset()" [disabled]="!FormGroup1.valid || !FormGroup2.valid || !FormGroup3.valid || !FormGroup4.valid || !FormGroup5.valid">Elküldés</button>
                </div>
            </div>
            <div fxLayout="row" fxLayoutAlign="start" class="pager">
                <div fxFlex="100%" fxLayoutAlign="start">
                    <button mat-flat-button color="#424242" matStepperPrevious class="left"><span fxLayoutAlign="start"><i class="material-icons click-area click-area-left">keyboard_arrow_left</i><span class="button-label">Előző</span></span></button>
                </div>
            </div>
        </form>
    </mat-step>
</mat-horizontal-stepper>